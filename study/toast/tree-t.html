<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
    <script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
    <title>Document</title>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            var treeData = [
                {
                    id: 549731,
                    name: 'Beautiful Lies',
                    artist: 'Birdy',
                    release: '2016.03.26',
                    type: 'Deluxe',
                    typeCode: '1',
                    genre: 'Pop',
                    genreCode: '1',
                    grade: '4',
                    price: 10000,
                    downloadCount: 1000,
                    listenCount: 5000,
                    _attributes: {
                        expanded: true,
                    },
                    _children: [
                        {
                            id: 491379,
                            name: 'Chaos And The Calm',
                            artist: 'James Bay',
                            release: '2015.03.23',
                            type: 'EP',
                            typeCode: '2',
                            genre: 'Pop,Rock',
                            genreCode: '1,2',
                            grade: '5',
                            price: 12000,
                            downloadCount: 1000,
                            listenCount: 5000,
                            _children: [],
                        },
                        {
                            id: 498896,
                            name: 'The Magic Whip',
                            artist: 'Blur',
                            release: '2015.04.27',
                            type: 'EP',
                            typeCode: '2',
                            genre: 'Rock',
                            genreCode: '2',
                            grade: '3',
                            price: 15000,
                            downloadCount: 1000,
                            listenCount: 5000,
                            _attributes: {
                                expanded: false,
                            },
                        },
                        {
                            id: 450720,
                            name: "I'm Not The Only One",
                            artist: 'Sam Smith',
                            release: '2014.09.15',
                            type: 'Single',
                            typeCode: '3',
                            genre: 'Pop,R&B',
                            genreCode: '1,3',
                            grade: '4',
                            price: 8000,
                            downloadCount: 1000,
                            listenCount: 5000,
                            _attributes: {
                                expanded: true,
                            },
                            _children: [
                                {
                                    id: 587871,
                                    name: 'This Is Acting',
                                    artist: 'Sia',
                                    release: '2016.10.22',
                                    type: 'EP',
                                    typeCode: '2',
                                    genre: 'Pop',
                                    genreCode: '1',
                                    grade: '3',
                                    price: 20000,
                                    downloadCount: 1000,
                                    listenCount: 5000,
                                    _attributes: {
                                        expanded: true,
                                    },
                                    _children: [
                                        {
                                            id: 490500,
                                            name: 'Blue Skies',
                                            release: '2015.03.18',
                                            artist: 'Lenka',
                                            type: 'Single',
                                            typeCode: '3',
                                            genre: 'Pop,Rock',
                                            genreCode: '1,2',
                                            grade: '5',
                                            price: 6000,
                                            downloadCount: 1000,
                                            listenCount: 5000,
                                        },
                                        {
                                            id: 583551,
                                            name: 'Following My Intuition',
                                            artist: 'Craig David',
                                            release: '2016.10.01',
                                            type: 'Deluxe',
                                            typeCode: '1',
                                            genre: 'R&B,Electronic',
                                            genreCode: '3,4',
                                            grade: '5',
                                            price: 15000,
                                            downloadCount: 1000,
                                            listenCount: 5000,
                                        },
                                    ],
                                },
                            ],
                        },
                    ],
                },
                {
                    id: 436461,
                    name: 'X',
                    artist: 'Ed Sheeran',
                    release: '2014.06.24',
                    type: 'Deluxe',
                    typeCode: '1',
                    genre: 'Pop',
                    genreCode: '1',
                    grade: '5',
                    price: 20000,
                    downloadCount: 1000,
                    listenCount: 5000,
                },
                {
                    id: 295651,
                    name: 'Moves Like Jagger',
                    release: '2011.08.08',
                    artist: 'Maroon5',
                    type: 'Single',
                    typeCode: '3',
                    genre: 'Pop,Rock',
                    genreCode: '1,2',
                    grade: '2',
                    price: 7000,
                    downloadCount: 1000,
                    listenCount: 5000,
                },
                {
                    id: 541713,
                    name: 'A Head Full Of Dreams',
                    artist: 'Coldplay',
                    release: '2015.12.04',
                    type: 'Deluxe',
                    typeCode: '1',
                    genre: 'Rock',
                    genreCode: '2',
                    grade: '3',
                    price: 25000,
                    downloadCount: 1000,
                    listenCount: 5000,
                    _attributes: {
                        expanded: false,
                    },
                    _children: [
                        {
                            id: 294574,
                            name: '4',
                            artist: 'BeyoncÃ©',
                            release: '2011.07.26',
                            type: 'Deluxe',
                            typeCode: '1',
                            genre: 'Pop',
                            genreCode: '1',
                            grade: '3',
                            price: 12000,
                            downloadCount: 1000,
                            listenCount: 5000,
                        },
                        {
                            id: 265289,
                            name: '21',
                            artist: 'Adele',
                            release: '2011.01.21',
                            type: 'Deluxe',
                            typeCode: '1',
                            genre: 'Pop,R&B',
                            genreCode: '1,3',
                            grade: '5',
                            price: 15000,
                            downloadCount: 1000,
                            listenCount: 5000,
                        },
                    ],
                },
                {
                    id: 555871,
                    name: 'Warm On A Cold Night',
                    artist: 'HONNE',
                    release: '2016.07.22',
                    type: 'EP',
                    typeCode: '1',
                    genre: 'R&B,Electronic',
                    genreCode: '3,4',
                    grade: '4',
                    price: 11000,
                    downloadCount: 1000,
                    listenCount: 5000,
                },
                {
                    id: 550571,
                    name: 'Take Me To The Alley',
                    artist: 'Gregory Porter',
                    release: '2016.09.02',
                    type: 'Deluxe',
                    typeCode: '1',
                    genre: 'Jazz',
                    genreCode: '5',
                    grade: '3',
                    price: 30000,
                    downloadCount: 1000,
                    listenCount: 5000,
                }
            ];


            const grid = new tui.Grid({
                el: document.getElementById('grid'),
                data: treeData,
                rowHeaders: ['checkbox'],
                bodyHeight: 500,
                treeColumnOptions: {
                    name: 'name',
                    useCascadingCheckbox: true
                },
                columns: [
                    {
                        header: 'Name',
                        name: 'name',
                        width: 300
                    },
                    {
                        header: 'Artist',
                        name: 'artist'
                    },
                    {
                        header: 'Type',
                        name: 'type'
                    },
                    {
                        header: 'Release',
                        name: 'release'
                    },
                    {
                        header: 'Genre',
                        name: 'genre'
                    }
                ]
            });

            grid.on('expand', ev => {
                const { rowKey } = ev;
                const descendantRows = grid.getDescendantRows(rowKey);

                console.log('rowKey: ' + rowKey);
                console.log('descendantRows: ' + descendantRows);

                if (!descendantRows.length) {
                    grid.appendRow(
                        {
                            name: 'dynamic loading data',
                            _children: [
                                {
                                    name: 'leaf row'
                                },
                                {
                                    name: 'internal row',
                                    _children: []
                                }
                            ]
                        },
                        { parentRowKey: rowKey }
                    );
                }
            });

            grid.on('collapse', ev => {
                const { rowKey } = ev;
                const descendantRows = grid.getDescendantRows(rowKey);

                console.log('rowKey: ' + rowKey);
                console.log('descendantRows: ' + descendantRows);
            });
        });
    </script>
</head>

<body>
    <div id="grid"></div>
</body>

</html>